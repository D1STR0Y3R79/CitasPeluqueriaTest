<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Reserva tu cita</title>
  <link rel="stylesheet" href="estilos.css">
</head>
<body>
  <div class="container">
    <h1>Reserva tu cita</h1>
    <form id="form-cita">
      <input type="text" id="nombre" placeholder="A nombre de..." required>
      <input type="tel" id="telefono" placeholder="Teléfono" required pattern="[0-9]{9}">
      <input type="date" id="fecha" required>
      <input type="time" id="hora" required>
      <button type="submit">Reservar</button>
    </form>
    <div id="mensaje" class="mensaje"></div>
  </div>

  <script>
    const form = document.getElementById('form-cita');
    const mensaje = document.getElementById('mensaje');

    const scriptURL = 'https://script.google.com/macros/s/AKfycbxtJWNOYaGreZiA4dRRtG_aw4gswChtnk3KNxNIP_k3euEqpEimzWz1j2xBEPGba5rR1w/exec';

    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      const data = {
        nombre: document.getElementById('nombre').value,
        telefono: document.getElementById('telefono').value,
        fecha: document.getElementById('fecha').value,
        hora: document.getElementById('hora').value,
      };

      try {
        const res = await fetch(scriptURL, {
          method: 'POST',
          body: JSON.stringify(data),
          headers: { 'Content-Type': 'application/json' }
        });

        const result = await res.json();

        if (result.success) {
          mensaje.textContent = '✅ ¡Cita reservada con éxito!';
          mensaje.className = 'mensaje ok';
          mensaje.style.display = 'block';
          form.reset();
        } else {
          mensaje.textContent = '❌ ' + result.message;
          mensaje.className = 'mensaje error';
          mensaje.style.display = 'block';
        }
      } catch (err) {
        mensaje.textContent = '❌ Error al enviar los datos.';
        mensaje.className = 'mensaje error';
        mensaje.style.display = 'block';
      }
    });
  </script>
</body>
</html>